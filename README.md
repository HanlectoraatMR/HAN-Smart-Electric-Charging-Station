# HAN-Smart-Electric-Charging-Station.
   ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/10.jpg)

# 1.1	Background.
From 2013-2018  project CSGrip has been executed by project partners Alfen, TU Delft, Han, Alliander, WES and Bredenoord. In this project an energy container from Alfen is used to create an island grid. This energy container contains inverters and batteries to supply the electrical power for this electricity grid. One specific tasks of the energy container is to try to make a match between the generated electricity and the consumed electricity at any moment. One option for this would be to regulate down renewable energy sources. This energy is then lost (or not generated), which is not preferable. Another option is to use controllable generation, such as a diesel generator set. This is often also a non-preferable option, when the energy container is used in places with low availability (high prices / remote location) of diesel fuel or for sustainability reasons. The last option is to control the consumption. Controllable consumption is only used rarely. In order to test the energy container with controllable consumption a controllable EV charger was created in the CS Grip project. With this charger the charging of an electric car becomes controllable. It becomes possible to charge more in times when a lot of electricity is generated, or less when electricity is scarce.
# 1.2	About this document.
The HAN Smart Electric Charging Station is the follow up or an upgrade version of the EV Charger that was bulit in CSGrip project. On this document the basics of electric vehicle charging process is explained. We are also discuss the software on the Olimex microcontroller and Particle microcontroller respectively. More detail can be read in the Student Manual.  
# 2. Basics of electric vehicle charging.

EV charging is described in several standards the most important one would be NEN-IEC 61851-1. The currently most recent version is of 2011. In this standard several charging modes are described, which are listed as:
  •	Mode 1: AC with standardized socket-outlets
  •	Mode 2: AC with control pilot and RCD as part of the in-cable control box
  •	Mode 3: AC with control pilot and a dedicated EVSE permanently connected to mains
  •	Mode 4: Using an off-board charger, with control pilot, permanent mains connection.

For this charger mode 3 is used, in combination with a type 2 (Mennekes) plug. This is often referred to as a type 2, mode 3 charger. The type 2 plug is a 7-pin plug using the 3-phases, neutral, earth as used in every 3-phase connector with two added control pins. The control pins are the control pilot (CP) and proximity pilot (PP).

The CP is a control signal generated by the charger.  With this signal the charger communicates a maximum charge current a car is allowed to take. This can be either single phase or 3-phase. The signal on the CP line has a voltage between +12 and -12 Volt. It is a pulse width modulated signal of which the width of the signal represents the allowed maximum current. The car sends information to the charger about its state. The voltage on the line represents the state of the car.  The states are defined in the standard and differentiate between no car connected (+12V), car connected (+9V), ready to be charged (without/with ventilation, +6/+3V) and a few error states. The stated voltages are the top voltages of the PWM signal. An example of the signal on the CP line during a charge session is shown in 
    ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/1.png)

# 3. Harware and software configuration.

Read HAN EVSE Student Manual for detail info.

  ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/8.png)

  ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/5.png)
   
  ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/6.png)
   
  ![alt text](https://github.com/HanlectoraatMR/HAN-Smart-Electric-Charging-Station/blob/master/Pictures/4.png)
    
    

